version: 2

models:
  - name: dt_orders
    description: "Orders bronze table"
    config:
      constraints:
        primary_key:
          columns: ['ORDER_ID']
    columns:
      - name: ORDER_ID
        type: VARCHAR(6)
        description: "Order ID"
      - name: ORDER_DATE
        type: DATE
        description: "Order Date"
      - name: STATUS
        type: VARCHAR(32)
        description: "Order Status"
      - name: LOAD_DATE
        type: TIMESTAMP_NTZ
        description: "Load Date"
      - name: LOAD_DATE_DAY
        type: DATE
        description: "Load Date Day"
      - name: LOAD_DATE_MONTH
        type: VARCHAR(7)
        description: "Load Date Month"

  - name: dt_customers
    description: "Customers bronze table"
    config:
      constraints:
        primary_key:
          columns: ['CUSTOMER_ID']
    columns:
      - name: CUSTOMER_ID
        type: VARCHAR(5)
        description: "Customer ID"
      - name: REGION
        type: VARCHAR(32)
        description: "Customer Region"
      - name: CUSTOMER_SEGMENT
        type: VARCHAR(32)
        description: "Customer Segment"
      - name: LOAD_DATE
        type: TIMESTAMP_NTZ
        description: "Load Date"
      - name: LOAD_DATE_DAY
        type: DATE
        description: "Load Date Day"
      - name: LOAD_DATE_MONTH
        type: VARCHAR(7)
        description: "Load Date Month"

  - name: dt_products
    description: "Products bronze table"
    config:
      constraints:
        primary_key:
          columns: ['PRODUCT_ID']
    columns:
      - name: PRODUCT_ID
        type: VARCHAR(4)
        description: "Product ID"
      - name: PRODUCT_NAME
        type: VARCHAR(64)
        description: "Product Name"
      - name: UNIT_PRICE
        type: NUMBER(38,2)
        description: "Unit Price"
      - name: LOAD_DATE
        type: TIMESTAMP_NTZ
        description: "Load Date"
      - name: LOAD_DATE_DAY
        type: DATE
        description: "Load Date Day"
      - name: LOAD_DATE_MONTH
        type: VARCHAR(7)
        description: "Load Date Month"

  - name: dt_key
    description: "Key table linking orders, customers and products"
    config:
      constraints:
        primary_key:
          columns: ['ORDER_ID', 'CUSTOMER_ID', 'PRODUCT_ID']
        foreign_keys:
          - columns: ['ORDER_ID']
            references: "dt_orders"
          - columns: ['CUSTOMER_ID']
            references: "dt_customers"
          - columns: ['PRODUCT_ID']
            references: "dt_products"
    columns:
      - name: ORDER_ID
        type: VARCHAR(6)
        description: "Order ID"
      - name: CUSTOMER_ID
        type: VARCHAR(5)
        description: "Customer ID"
      - name: PRODUCT_ID
        type: VARCHAR(4)
        description: "Product ID"
      - name: LOAD_DATE
        type: TIMESTAMP_NTZ
        description: "Load Date"
      - name: LOAD_DATE_DAY
        type: DATE
        description: "Load Date Day"
      - name: LOAD_DATE_MONTH
        type: VARCHAR(7)
        description: "Load Date Month"

